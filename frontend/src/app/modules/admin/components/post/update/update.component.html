<div class="row">
    <div class="col-xxl-12">
        <div class="card">
            <div class="card-header align-items-center d-flex">
                <h4 class="card-title mb-0 flex-grow-1">Sửa bài viết</h4>
            </div>
            <div class="card-body">
                <form [formGroup]="postForm" (ngSubmit)="savePost()">
                    <!-- User -->
                    <div class="form-group mb-3">
                        <label
                            >Người dùng
                            <span class="text-danger">*</span></label
                        >
                        <input
                            type="text"
                            class="form-control mb-2"
                            [value]="post?.user?.username"
                            disabled
                        />
                        <input type="hidden" formControlName="user_id" />

                        <div
                            *ngIf="submitted && f['user_id'].errors"
                            class="invalid-feedback"
                        >
                            <div *ngIf="f['user_id'].errors['required']">
                                Vui lòng nhập ID người dùng
                            </div>
                        </div>
                    </div>

                    <!-- Category -->
                    <div class="form-group mb-3">
                        <label
                            >Danh mục <span class="text-danger">*</span></label
                        >
                        <select
                            formControlName="category_id"
                            class="form-control"
                            [ngClass]="{
                                'is-invalid':
                                    submitted && f['category_id'].errors
                            }"
                        >
                            <option value="">-- Chọn danh mục --</option>
                            <option
                                *ngFor="let c of categoryList"
                                [value]="c.id"
                            >
                                {{ c.name }}
                            </option>
                        </select>
                        <div
                            *ngIf="submitted && f['category_id'].errors"
                            class="invalid-feedback"
                        >
                            <div *ngIf="f['category_id'].errors['required']">
                                Vui lòng chọn danh mục
                            </div>
                        </div>
                    </div>

                    <!-- Language -->
                    <div class="form-group mb-3">
                        <label
                            >Ngôn ngữ <span class="text-danger">*</span></label
                        >
                        <select
                            formControlName="language_id"
                            class="form-control"
                            [ngClass]="{
                                'is-invalid':
                                    submitted && f['language_id'].errors
                            }"
                        >
                            <option value="">-- Chọn ngôn ngữ --</option>
                            <option
                                *ngFor="let c of languageList"
                                [value]="c.id"
                            >
                                {{ c.name }}
                            </option>
                        </select>
                        <div
                            *ngIf="submitted && f['language_id'].errors"
                            class="invalid-feedback"
                        >
                            <div *ngIf="f['language_id'].errors['required']">
                                Vui lòng chọn ngôn ngữ
                            </div>
                        </div>
                    </div>

                    <!-- Title -->
                    <div class="form-group mb-3">
                        <label>Tiêu đề</label>
                        <input
                            type="text"
                            formControlName="title"
                            class="form-control"
                        />
                    </div>

                    <!-- Description -->
                    <div class="form-group mb-3">
                        <label>Mô tả</label>
                        <textarea
                            formControlName="description"
                            class="form-control"
                        ></textarea>
                    </div>

                    <!-- Content -->
                    <div class="form-group mb-3">
                        <label>Nội dung</label>
                        <ngx-editor-menu
                            [editor]="editor"
                            [toolbar]="toolbar"
                        ></ngx-editor-menu>
                        <ngx-editor
                            [editor]="editor"
                            formControlName="content"
                            class="form-control"
                        ></ngx-editor>
                        <div
                            *ngIf="submitted && f['content'].errors"
                            class="invalid-feedback d-block"
                        >
                            <div *ngIf="f['content'].errors['required']">
                                Vui lòng nhập nội dung
                            </div>
                        </div>
                    </div>

                    <!-- Trạng thái -->
                    <div class="form-group mb-3">
                        <label>Trạng thái</label>
                        <select class="form-control" formControlName="status">
                            <option [value]="1">Hoạt động</option>
                            <option [value]="0">Không hoạt động</option>
                        </select>
                    </div>
                    <!-- Avatar -->
                    <div class="form-group mb-3">
                        <label>Ảnh đại diện (Avatar)</label>
                        <input
                            type="file"
                            class="form-control"
                            (change)="onFileChange($event)"
                            accept="image/*"
                        />
                    </div>
                    <!-- Submit -->
                    <div class="form-group text-end">
                        <button type="submit" class="btn btn-primary">
                            Lưu bài viết
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
